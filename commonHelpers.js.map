{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst input = document.querySelector('.input-search');\nconst form = document.querySelector('.form-search');\nconst gallery = document.querySelector('.gallery');\nconst buttonSubmit = document.querySelector('.button-submit');\nconst buttonLoad = document.querySelector('.button-load');\nconst loader = document.querySelector('.loader');\nconst perPage = 15;\nlet page = 1;\nlet totalPages = 0;\nlet currentQuery = ''; \n\nloader.hidden = true;\nbuttonLoad.hidden = true;\n\nbuttonSubmit.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    try {\n        const { total, hits } = await fetchPosts(page);\n        totalPages = Math.ceil(total / perPage);\n        renderPosts(hits);\n        buttonLoad.hidden = totalPages <= 1;\n    } catch (error) {\n        showError('Sorry, there was an error loading images.');\n    }\n});\n\nbuttonLoad.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    page++;\n    try {\n        const { hits } = await fetchPosts(page, currentQuery); \n        renderPosts(hits);\n    } catch (error) {\n        showError('Sorry, there was an error loading more images.');\n        buttonLoad.hidden = true;\n    }\n});\n\nasync function fetchPosts(page, query = input.value) {\n    const apiKey = '42111796-9c286351ad531542ab3bfb8be';\n    currentQuery = query;\n    const response = await axios.get(\n        `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`\n    );\n    return response.data;\n}\n\nfunction renderPosts(posts) {\n    const markup = posts.map(({ webformatURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\"><a href=\"${webformatURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        <p>Likes: ${likes}</p>\n        <p>Views: ${views}</p>\n        <p>Comments: ${comments}</p>\n        <p>Downloads: ${downloads}</p>\n        </li>`\n    ).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionSelector: 'img',\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        animation: 250,\n    });\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    form.reset();\n}\n\nfunction showError(message) {\n    iziToast.error({\n        message,\n        class: 'izi-toast',\n        messageColor: '#fafafb',\n        messageSize: '16px',\n        backgroundColor: '#ef4040',\n        maxWidth: '432px',\n        position: 'topRight',\n    });\n}\n"],"names":["input","form","gallery","buttonSubmit","buttonLoad","loader","perPage","page","totalPages","currentQuery","event","total","hits","fetchPosts","renderPosts","showError","query","apiKey","axios","posts","markup","webformatURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","message","iziToast"],"mappings":"owBAMA,MAAMA,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,GAChB,IAAIC,EAAO,EACPC,EAAa,EACbC,EAAe,GAEnBJ,EAAO,OAAS,GAChBD,EAAW,OAAS,GAEpBD,EAAa,iBAAiB,QAAS,MAAOO,GAAU,CACpDA,EAAM,eAAc,EACpB,GAAI,CACA,KAAM,CAAE,MAAAC,EAAO,KAAAC,CAAI,EAAK,MAAMC,EAAWN,CAAI,EAC7CC,EAAa,KAAK,KAAKG,EAAQL,CAAO,EACtCQ,EAAYF,CAAI,EAChBR,EAAW,OAASI,GAAc,CACrC,MAAC,CACEO,EAAU,2CAA2C,CACxD,CACL,CAAC,EAEDX,EAAW,iBAAiB,QAAS,MAAOM,GAAU,CAClDA,EAAM,eAAc,EACpBH,IACA,GAAI,CACA,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAMC,EAAWN,EAAME,CAAY,EACpDK,EAAYF,CAAI,CACnB,MAAC,CACEG,EAAU,gDAAgD,EAC1DX,EAAW,OAAS,EACvB,CACL,CAAC,EAED,eAAeS,EAAWN,EAAMS,EAAQhB,EAAM,MAAO,CACjD,MAAMiB,EAAS,qCACf,OAAAR,EAAeO,GACE,MAAME,EAAM,IACzB,gCAAgCD,OAAYD,sEAA0EV,UAAgBC,GAC9I,GACoB,IACpB,CAEA,SAASO,EAAYK,EAAO,CACxB,MAAMC,EAASD,EAAM,IAAI,CAAC,CAAE,aAAAE,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,4CAChDL;AAAA,0CACFA,WAAsBC;AAAA,oBAC5CC;AAAA,oBACAC;AAAA,uBACGC;AAAA,wBACCC;AAAA,cAExB,EAAM,KAAK,EAAE,EACTxB,EAAQ,mBAAmB,YAAakB,CAAM,EAC9C,MAAMO,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,gBAAiB,MACjB,aAAc,MACd,gBAAiB,SACjB,UAAW,GACnB,CAAK,EACDD,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,EAChB1B,EAAK,MAAK,CACd,CAEA,SAASc,EAAUc,EAAS,CACxBC,EAAS,MAAM,CACX,QAAAD,EACA,MAAO,YACP,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,QACV,SAAU,UAClB,CAAK,CACL"}